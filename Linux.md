# Linux

## 1. Abstract

GNU计划, GNU是GNU is Not Unix的递归缩写, 旨在开发一个免费的类Unix的操作系统. Emacs编辑系统, BASH shell程序, GCC等都是GNU的产品.Linux内核与GNU其他软件结合诞生了GNU/Linux操作系统, 简称为Linux.

## 2. 目录结构介绍

### 2.1 路径

Linux路径到达指定文件目录组成, 目录分割符为斜杠`/`

路径分为绝对路径和相对路径:

* 绝对路径
  * 绝对路径是从根目录`/`开始下至到达文件所经过的所有节点目录
  * 绝对路径都是从根开始的, 所以第一个字符一定是`/`
* 相对路径
  * 相对路径是指目标目录相对于当前目录的位置
  * 如果不在当前目录下, 则需要使用两个特殊目录`.`和`..`, `.`表示当前目录, `..`表示上级目录

### 2.2 文件系统

在Windows计算机中,右许多驱动器盘符, 每个驱动器都有自己的根目录, 这样形成多个树并列的情况

在Linux中, 所有数据都是由文件系统安装树型目录结构管理的, 使用单一的根目录结构, 所有分区都挂载到单一的根目录上

#### 2.2.1 Linux目录结构

目录|说明
-|-
`/`|根目录
`/bin`|可执行二进制文件的目录, 即放工具
`/boot`|放置Linux系统启动时用到的一些文件, 如Linux内核文件`/boot/vmlinuz`, 系统引导管理器`/boot/grub`
`/dev`|存放Linux系统下的设备文件, 访问该目录下的某个文件, 相当于访问某个设备
`/etc`|系统配置文件存放目录
`/home`|系统默认的用户家目录
`/lib`|系统使用的函数库目录, 程序执行过程中, 需要调用一些额外的参数时需要函数库的协助
`/lost+font`|系统异常时, 会将一些遗失的片段放置于次目录
`/mnt`|光盘默认挂载点
`/opt`|给主机额外安装软件所摆放的目录
`/proc`|此目录的数据都在内存中, 如系统核心, 外部设备, 网络状态, 由于数据都放在内存中, 所以不占用磁盘空间
`/root`|系统管理员的根目录
`/tmp`|一般用户或正在执行的程序临时存放文件的目录
`/usr`|应用程序存放目录
`/var`|存放系统执行过程中经常变化的文件

### 2.3 一切皆文件

Linux中对数据文件, 程序文件, 设备文件, 网络文件等的管理抽象为文件, 使用统一方式方法管理

在Linux中也区分文件类型, 通过文件类型可以判断文件属于可执行文件, 文本文件还是数据文件. 在Linux中文件可以没有扩展名

#### 2.3.1 文件分类

Linux中文件类型有5种: 普通文件, 目录文件, 设备文件, 管道文件和链接文件

文件符号|文件类型|说明
-|-|-
`-`|普通文件|计算机操作系统用于存放数据, 程序等信息的文件, 一般长期保存在外部存储器中, 普通文件又包括文本文件, 数据文件, 可执行的二进制文件等
`d`|目录文件|Linux系统包目录看成一种特殊文件, 利用它可以构成文件系统的树型结构. 目录文件只允许系统管理员对其进行修改. 每个目录文件至少包括两个目录, `..`表示上一级目录, `.`表示目录本身
`c`, `b`|设备文件|Linux系统包每个设备都映射成一个文件, 它用于向I/O设备提供链接的一种文件, 分为字符设备 `c` 和块设备 `b` 文件
`s`|管道文件|是Linux中较为特殊的文件类型, 用于进程间的通信
`l`|链接文件|类似于Windows下的快捷方式, 链接又可以分为软连接(符号链接)和硬链接

### 2.4 文件权限

`-rw-r--r-- 1 cm cm 6258 May 28 23:35 git.md`

`文件类型-文件所有者权限-用户组权限-其他用户权限-数字-文件所有者-用户组-文件大小-文件创建时间-文件名`

#### 2.4.1 用户类型

* 所有者
* 用户组
* 其他用户

#### 2.4.2 权限

* `r` 读权限
  * 对文件而言, 具有读取文件内容的权限
  * 对目录来说具有浏览目录的权限
* `w` 写权限
  * 对文件而言, 具有新增, 修改文件内容的权限
  * 对目录而言, 基友删除, 移动目录内容的权限
* `x` 可执行权限
  * 对文件而言, 具有执行文件的权限
  * 对目录而言, 具有进入目录的权限

通常, Linux只允许文件的属主或超级用户改变文件的读写权限

## 3. 命令

### 3.1 命令格式

==command [-options] [parameter1] [parameter2] ...==

说明:

* command 命令名
* [-options] 选项, 可用来对命令进行控制, 也可以省略, []代表可选
* parameter 传递给命令的参数, 可以是零个一个或多个

### 3.2 查看命令帮助文档

* `--help` : `command --help` Linux命令自带的帮助信息, 并不是所有命令都自带这个选项
* `man` : 是Linux提供的一个手册, 包含绝大部分命令,函数使用说明

`man [-options] command`

man设置如下功能键:

功能键|功能
-|-
空格键|显示手册下一页
Enter键|一次滚动手册下一行
b|回滚一屏
f|前滚一屏
q|退出man命令
/word|搜索word字符串

### 3.3 常用命令

==__ls__ 查看文件信息==

* 功能 查看文件信息, 列出目录内容, 类似于DOS下的dir
* 语法 `ls -la [filename]`
* 选项
  * __-a__ 显示所有文件, 包括隐藏文件
  * __-l__ 以列表形式显示文件详细信息
* 通配符
  * __\*__ 代表多个任意字符
  * __?__ 代表一个任意字符
  * __\\__ 使通配符失去通配符作用, 当作普通字符使用

==__>__ 输出重定向==

* 功能 输出重定向，将原本要在屏幕输出的内容写到一个文件中，创建新文件或者覆盖旧文件

* 示例 `ls > test.text`

* 说明 ==>>== `ls >> test.txt` 不会覆盖原来的内容

==__cat__ 查看文件内容==

* 功能 查看文件内容


==__more__ 分屏显示==

- 文件内容过长时，使用more命令每次只显示一页，按下空格键显示下一页，按下q键退出显示

==__|__ 管道==

- 功能 一个命令的输出可以通过管道作为另一个命令的输入

==__clear__ 清屏==

- 功能 清除终端屏幕上的显示，类似于DOS的`cls`
- 快捷键 `Ctrl+l`

==__cd__ 切换工作目录==

- 功能 切换工作目录，目录文件区分大小写，可以跟绝对路径，也可以跟相对路径
- 语法 `cd 路径`

命令|含义
-|-
cd|切换到当前用户主目录
cd ~|切换到当前用户主目录
cd .|切换到当前目录
cd ..|切换到上一级目录
cd -|进入上一个进入的目录

==__pwd__ 查看当前所在路径==

- 功能 查看当前所在路径

==__mkdir__ 创建目录==

- 创建目录，通过选项 __-p__ 可以递归创建目录
- 示例
  - `mkdir a b c` 一次创建多个文件夹
  - `mkdir a/b/c` 递归创建多个文件夹

==__rmdir__ 删除空文件夹==

- 删除空文件夹，只能删除文件夹

==__rm__ 删除文件和目录==

- 删除文件和目录，使用`rm`命令要小心，删除后不可恢复

常用参数及含义

参数|含义
-|-
`-i` | 以进行交互方式执行，逐个确认要删除的文件
`-f` | 强制删除，忽略不存在的文件，无需提示
`-r` | 递归删除目录下的内容，删除文件夹时必须添加此参数

==__In__ 建立连接文件==

- Linux链接文件类似于windows下的快捷方式
- 链接文件分为软链接和硬链接
- 软链接不占用磁盘空间，源文件删除则软链接失效
- 硬链接只能链接普通文件，不能链接目录

使用格式：

- `ln 源文件 链接文件`
- `ln -s 源文件 链接文件`

如果没有 `-s` 选项代表建立一个硬链接文件，两个文件占用大小相同的硬盘空间，即使没有删除源文件，链接文件还是存在，所以 `-s` 选项更常用

==__grep__ 文本搜索==

- grep能对文本文件进行模式查找，如果找到匹配模式，grep打印包含模式的所有行
- `grep [-选项] '搜索内容串' 文件名`
- `grep 'a' 1.txt`

常用选项

选项|含义
-|-
`-v`|显示不包含匹配文本的所有行，相当于求反
`-n`|显示匹配行及行号
`-i`|忽略大小写

grep搜索内容串为字符串时最好加上引号， grep搜索内容串可以是正则表达式

==__find__ 查找文件==

- 在特定目录下搜索符合条件的文件，也可以用来搜索特定用户属主的文件

常用用法

命令|含义
-|-
`find ./ -name test.sh`|搜索当前目录下，所有名为test.sh的文件
`find ./ -name '*.sh'`|搜索当前目录下所有后缀名为.sh的文件
`find ./ -name "[A-Z]*"`|搜索当前目录下所有以大写字母开头的文件
`find /tmp -size 2M`|搜索/tmp目录下等于2M的文件
`find /tmp -size +2M`|搜索/tmp目录下大于2M的文件
`find /tmp -size -2M`|搜索/tmp目录下小于2M的文件
`find ./ -size +4k -size -5M`|搜索当前目录下大于4K，小于5M的文件
`find ./ -perm 0777`|查找当前目录下权限为777的文件或目录

==__cp__ 复制文件==

- 