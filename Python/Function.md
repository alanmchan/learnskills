# Function

函数：封装一个特定功能，表示一个行为。可以重复执行



## 函数定义与调用

### 函数定义

```python
# 函数的定义
def 函数名([形参列表]):
    函数体  # 逻辑处理，返回结果
```

说明：

- **def**为关键字，全程define
- 函数名就是语句块的名称
- 函数名的命名规则与变量相同，但一般用动词
- 函数外部不可访问函数内部变量，在函数内部可以访问外部变量，通常让函数处理外部数据需要用传参列表给函数出入一些参数
- 函数形参列表可以为空
- 函数体部分不能为空，若为空可以用pass语句代替



### 函数调用

```python
# 函数的调用
函数名([实参列表])

# 获取函数地址
函数名
```

说明：

- 函数调用是一个表达式
- 若没有__return语句__，此函数执行完毕后返回对象为__None__；若要返回其他对象，需要用return语句
- 单独写函数名不加括号，是获取函数的地址



### return 语句

用于函数中，结束当前函数的执行，返回到调用该函数的地方，同时返回一个对象的引用关系

```python
return [表达式]
```

说明：

- **return** **语句后的表达式可以省略，省略后相当于** **return None**

- 如果函数没有return语句，着函数执行最后一条语句后返回None（相当于加了一条return None语句）
- 函数调用一定会返回一个对象的引用



## 参数传递

### 函数实参传递方式

- 位置传参
  - 位置传参：实参的对应关系与形参的对应关系是按位置来依次对应的
  - 序列传参：在函数调用过程中，用 ***** 将序列拆解后按位置传参的方式进行参数传递
- 关键字传参
  - 关键字传参：在传参时，按照形参的名称给形参赋值，形参和实参按名称进行匹配
  - 字典关键字传参：指实参为字典，将字典用两个星号 ***\*** 拆解后进行关键字传参的传递方式

```python
def myfun(a, b, c):
    pass

# 位置传参
myfun(1, 2, 3)
# 要求实参个数与形参个数相同

# 序列传参
s1 = 'abc'
s2 = [1, 2, 3]
myfun(*s1)  # 等同于myfun('a', 'b', 'c')
myfun(*s2)  # 等同于myfun(s2[0], s2[1], s2[2])
# 序列传参时，序列拆解的位置将与形参位置一一对应

# 关键字传参
myfun(b = 2, a = 1, c = 3) # 等同于myfun(1, 2, 3)
# 实参与形参按名称进行匹配，可以不按位置进行匹配
# 实参中关键字要在形参中存在

# 字典关键字传参
D = {'c':3, 'a':1, 'b':2}
myfun(**D) # 等同于myfun(d['a'], d['b'], d['c'])
# 字典的键名和形参名一致
# 字典的键必须为字符串
# 字典的键要在形参中存在
```



### 函数形参定义方式

- 位置形参
  - 位置形参：按位置顺序书写形参
  - 星号元组形参：用于不确定位置传参个数时，收集多合的位置传参，元组名通常用args
- 命名关键字形参
  - 命名关键字形参：强制实参使用关键字传递
  - 双星号字典形参：用于不确定关键字传参个数时,收集多余的关键字传参，字典形参通常定义为**kwargs

```python
# 位置形参
def myfunc(a, b, c):
    pass
```

```python
# 星号元组形参
def 函数名(*元组形参名):
    pass

def func(*args):
    print(args)
    print(len(args))

func(1, 2, 3, 4)  # args = (1, 2, 3, 4)
func(*'hello', 'world', 1, 2, 3)  # args = ('h', 'e', 'l', 'l', 'o', 'world', 1, 2, 3)
```

```python
# 命名关键字形参
def 函数名(*, 参数名):
    pass

def 函数名(*args, 参数名):
    pass


def fn(*, d, e):
    print(d, e)
    
fn(d=1, e=2)
fn(1, 2)  # error


def fm(*args, d, e):
    print(args)
    print(d, e)
    
fm(1, 2, d=1, e=2)
fm(*'ab', **{'e':2, 'd':1})


def f1(a, b, *, c, d):
    pass
f1(1, 2, c=3, d=4)

def f2(a, b, *args, c, d):
    pass
f2(1, 2, c=3, d=4)
```

```python
# 双星号字典形参
def 函数名(**kwargs):
    pass

def fn(**kwargs):
    print(kwargs)
fn(a=1, b=2, c=3)  # kwargs = {'a':1, 'c':3, 'b':2}
```



### 缺省参数

又称为默认参数，在函数定义时，给形参赋值，调用函数时可以不传入实参，则使用缺省值

作用：让调用更方便，无需传入无关实参

```python
def 函数名(形参名1=默认实参1, 形参名2=默认实参2, ...):
    pass

def info(name, age=0, address=None):
    print(name, '今年', age, '岁, 住址是', address)
    
infor('A', 15)  # A今年15岁住址是:None
info('B', 20, 'Beijing') # B今年20岁住址是:Beijing
```

注意：**缺省参数必须自右至左依次存在，若有一个参数有缺省参数，则其右侧的所有参数都必须有缺省参数**



### 函数综合传参

- 函数的传参方式，在形参能唯一匹配到实参的情况下，可以任意组合
- 函数的**位置传参要先于关键字传参**

- **实参给形参进行赋值传递，并不会复制新的对象**
- 缺省参数、位置形参、星号元组形参、命名关键字形参和双星号字典形参可以混合使用

函数参数从左自右的顺序为：__位置--星号元组--命名关键字--双星号字典__

```python
def fn(a,b,*args, c, **kwargs):
	pass
		
fn(1,2,3,4,d=6,c=5,e=7)
# a= 1, b=2, args=(3,4),c=5,kwargs={'d':6,'e':7}
		
fn(*'hello',d=6, **{'c':5, 'e':7})
# a='h', b='e',args=('l','l','o'),c=5,kwargs={'d':6,'e':7}
```

